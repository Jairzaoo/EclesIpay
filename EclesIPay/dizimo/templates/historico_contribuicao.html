{% extends 'base.html' %}
{% load static %}
{% load custom_filters %}

{% block content %}
<div class="auth-box">
    <div class="header-back">
        <a href="{% url 'home' %}" class="auth-box__back-arrow" style="display: inline-block; cursor: pointer; padding: 8px; text-decoration: none; position: relative; z-index: 10;">
            <i class="fas fa-arrow-left"></i> Voltar
        </a>
        
    </div>
    <h2><i class="fas fa-history"></i> Histórico de Contribuições</h2>
    
    {% if parishes %}
    <!-- Parish Summary -->
    <div class="parish-summary">
        <h3>Resumo por Paróquia</h3>
        <div class="parish-cards">
            {% for parish, data in parishes.items %}
            <div class="parish-card">
                <h4>{{ parish }}</h4>
                <div class="parish-stats">
                    <div>
                        <span>Contribuições</span>
                        <strong>{{ data.count }}</strong>
                    </div>
                    <div>
                        <span>Total</span>
                        <strong>R$ {{ data.total|floatformat:2 }}</strong>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <p class="no-contributions">Você ainda não fez nenhuma contribuição.</p>
    {% endif %}
</div>
{% endblock %}